---
description: Authoritative guide for Project Atlas architecture, Cognitive 2.0 meta-planning logic, Active Retrieval, and the continuous learning principles of the Trinity Graph runtime. Updated December 2025.
---

# Project Atlas: –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞, Workflow —Ç–∞ –û—Å–Ω–æ–≤–Ω—ñ –ü—Ä–∏–Ω—Ü–∏–ø–∏  
**–ê–∫—Ç—É–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω: –ì—Ä—É–¥–µ–Ω—å 2025 (Cognitive 2.1 + Trinity Improvements v1.0)**

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç —î **—î–¥–∏–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º –ø—Ä–∞–≤–¥–∏** –ø—Ä–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏ Atlas (Trinity Runtime).

‚ö†Ô∏è **–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 20 –≥—Ä—É–¥–Ω—è 2025 - –î–æ–¥–∞–Ω–æ Pydantic –≤–∞–ª—ñ–¥–∞—Ü—ñ—é, State Logging, MyPy —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è

---

## 1. –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–æ—Ç–∏ (Core Principles)

Atlas ‚Äî —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä, –∞ **–∞–≤—Ç–æ–Ω–æ–º–Ω–∏–π –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä macOS**, —â–æ –∫–µ—Ä—É—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏:

1.  **–ê–≤—Ç–æ–Ω–æ–º–Ω–∞ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è (Autonomous Navigation)**  
    –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –ø—Ä–∏–π–º–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –≤ —É–º–æ–≤–∞—Ö –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ—Å—Ç—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ü–∏–∫–ª "–°–ø—Ä–∏–π–Ω—è—Ç—Ç—è ‚Üí –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è ‚Üí –î—ñ—è ‚Üí –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è".
    
2.  **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ú–∏—Å–ª–µ–Ω–Ω—è–º (Meta-Planning 2.0)**  
    –ê–≥–µ–Ω—Ç –∫–µ—Ä—É—î –≤–ª–∞—Å–Ω–æ—é —Å—Ç—Ä–∞—Ç–µ–≥—ñ—î—é: –æ–±–∏—Ä–∞—î —Ä—ñ–≤–µ–Ω—å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, —Ä–µ–∂–∏–º –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ —Ç–∏–ø –ø–ª–∞–Ω—É. **–ù–æ–≤–∏–Ω–∫–∞**: Pydantic –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.
    
3.  **–í—ñ–∑—É–∞–ª—å–Ω–µ –°–ø—Ä–∏–π–Ω—è—Ç—Ç—è (Vision-First)**  
    –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤ —Ç–∞ Computer Vision —è–∫ Ground Truth. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ multi-monitor —Ç–∞ –¥–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–π–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É.
    
4.  **–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å —Ç–∞ –°—Ç–µ–ª—Å-—Ä–µ–∂–∏–º (Privacy & Stealth)**  
    –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—â–µ–Ω–Ω—è —Å–ª—ñ–¥—ñ–≤ —Ç–∞ –ø—ñ–¥–º—ñ–Ω–∞ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ (`spoofing`).
    
5.  **–ü–æ—Å—Ç—ñ–π–Ω–µ –ù–∞–≤—á–∞–Ω–Ω—è (Continuous Learning 2.0)**  
    –°–∏—Å—Ç–µ–º–∞ –≤–∏—Ç—è–≥—É—î –¥–æ—Å–≤—ñ–¥ (—è–∫ —É—Å–ø—ñ—à–Ω–∏–π, —Ç–∞–∫ —ñ –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏–π) —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –π–æ–≥–æ —É **Knowledge Base** –∑ –æ—Ü—ñ–Ω–∫–æ—é –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ —Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–º.
    
6.  **–î–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –õ–æ–≥—É–≤–∞–Ω–Ω—è (State Logging)**  
    –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É—î –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏. –õ–æ–≥–∏: `logs/trinity_state_*.log`

---

## 2. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ Trinity Runtime (LangGraph)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ –Ω–µ—Ä–≤–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ Atlas –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ü–∏–∫–ª—ñ—á–Ω–æ–º—É –≥—Ä–∞—Ñ—ñ. –ë—É–¥—å-—è–∫–∞ —É—Å–ø—ñ—à–Ω–∞ —á–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –º—ñ—Å—ñ—è –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –≤—É–∑–æ–ª –Ω–∞–≤—á–∞–Ω–Ω—è.

```mermaid
graph TD
    START((START)) --> MP[meta_planner<br/>–ì–æ–ª–æ–≤–∞/–°—Ç—Ä–∞—Ç–µ–≥/–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä]
    MP -->|Policy & Strategy| C7[context7<br/>–ö–æ–Ω—Ç–µ–∫—Å—Ç-–ú–µ–Ω–µ–¥–∂–µ—Ä<br/>+ Sliding Window]
    C7 -->|Normalized Context| A[atlas<br/>–ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä –ü–ª–∞–Ω—É]
    MP -->|–ø–ª–∞–Ω –≥–æ—Ç–æ–≤–∏–π| T[tetyana<br/>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å]
    MP -->|–ø–ª–∞–Ω –≥–æ—Ç–æ–≤–∏–π| G[grisha<br/>–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ç–æ—Ä]
    A --> MP
    T --> G
    G --> MP
    MP -->|–∑–∞–≤–µ—Ä—à–µ–Ω–æ| K[knowledge<br/>–ï–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä –î–æ—Å–≤—ñ–¥—É]
    K --> END((END))
    
    subgraph Memory Layers
        WM[Working Memory]
        EM[Episodic Memory]
        SM[Semantic Memory]
    end
    
    MP -.-> WM
    WM -.-> EM
    EM -.-> SM
```

### 2.1 Trinity Agents & Layers

-   **Meta-Planner** (`_meta_planner_node`): –ì–æ–ª–æ–≤–Ω–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä. –í–∏–∫–æ–Ω—É—î **Active Retrieval** —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä—É—î —Å–ø–æ–≥–∞–¥–∏.
-   **Context7** (`context7`): **Explicit Context Manager**. –ì–æ—Ç—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∫–µ—Ä—É—î –±—é–¥–∂–µ—Ç–æ–º —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ —ñ–Ω'—î–∫—Ç—É—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏. **–ù–æ–≤–∏–Ω–∫–∞**: Sliding Window –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ–∑–∞—Ü—ñ—î—é –Ω–µ–¥–∞–≤–Ω—ñ—Ö –∫—Ä–æ–∫—ñ–≤.
-   **Atlas** (`_atlas_node`): –ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä —Ç–∞–∫—Ç–∏—á–Ω–æ–≥–æ –ø–ª–∞–Ω—É. –û—Ç—Ä–∏–º—É—î *–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π* –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ñ–¥ Context7 –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –∫—Ä–æ–∫—ñ–≤.
-   **Tetyana** (`_tetyana_node`): –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å (Native/GUI/Playwright).
-   **Grisha** (`_grisha_node`): –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ç–æ—Ä. –£ —Ä–∞–∑—ñ —É—Å–ø—ñ—Ö—É –∞–±–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–ª—É —ñ–Ω—ñ—Ü—ñ—é—î –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –Ω–∞–≤—á–∞–Ω–Ω—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `enhanced_vision_analysis` –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ—ó –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.
-   **Knowledge** (`_knowledge_node`): **–ï—Ç–∞–ø —Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó**. –ó–±–µ—Ä—ñ–≥–∞—î –¥–æ—Å–≤—ñ–¥ (`success`/`failed`).

---

## 3. –ö–ª—é—á–æ–≤—ñ –ü—ñ–¥—Å–∏—Å—Ç–µ–º–∏ (Core Components)

### 3.1 Hierarchical Memory System

–¢—Ä–∏—Ä—ñ–≤–Ω–µ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º'—è—Ç—ñ (`core/memory.py`):

| –®–∞—Ä | –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:---|:---|:---|
| **Working Memory** | –ü–æ—Ç–æ—á–Ω–∞ —Å–µ—Å—ñ—è | –¢–∏–º—á–∞—Å–æ–≤—ñ –¥–∞–Ω—ñ, –∞–∫—Ç–∏–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| **Episodic Memory** | –î–µ–∫—ñ–ª—å–∫–∞ —Å–µ—Å—ñ–π | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–æ–¥—ñ—ó, –≤–∑–∞—î–º–æ–¥—ñ—ó, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ |
| **Semantic Memory** | –ü–æ—Å—Ç—ñ–π–Ω–æ | –ö–æ–Ω—Å–æ–ª—ñ–¥–æ–≤–∞–Ω—ñ –∑–Ω–∞–Ω–Ω—è, –ø–∞—Ç–µ—Ä–Ω–∏, —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó |

```python
memory = HierarchicalMemory()
memory.add_to_working("current_task", {...})
memory.consolidate_to_semantic()  # Promote important knowledge
```

### 3.2 Context7 Sliding Window

–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (`core/context7.py`):

- **Token Budget**: –î–∏–Ω–∞–º—ñ—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –±—é–¥–∂–µ—Ç–æ–º —Ç–æ–∫–µ–Ω—ñ–≤
- **Priority Weighting**: –ü—Ä—ñ–æ—Ä–∏—Ç–µ–∑–∞—Ü—ñ—è –Ω–µ–¥–∞–≤–Ω—ñ—Ö –∫—Ä–æ–∫—ñ–≤ —Ç–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- **ContextMetrics**: –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

### 3.3 Agent Message Protocol

–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –º—ñ–∂ –∞–≥–µ–Ω—Ç–∞–º–∏ (`core/agent_protocol.py`):

- **AgentMessage**: –¢–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
- **PriorityMessageQueue**: –ß–µ—Ä–≥–∞ –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- **MessageRouter**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∞

### 3.4 Parallel Tool Executor

–ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤ (`core/parallel_executor.py`):

- **DependencyAnalyzer**: –ê–Ω–∞–ª—ñ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏
- **Thread Pool**: –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- **StepResult**: –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É —Ç–∞ –º–µ—Ç—Ä–∏–∫

---

## 4. Vision Pipeline (Enhanced)

–†–æ–∑—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É (`system_ai/tools/vision.py`, `core/vision_context.py`):

### 4.1 DifferentialVisionAnalyzer

| –§—É–Ω–∫—Ü—ñ—è | –û–ø–∏—Å |
|:---|:---|
| `capture_all_monitors()` | Multi-monitor screenshot —á–µ—Ä–µ–∑ Quartz/mss |
| `analyze_frame()` | –î–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–π–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ + OCR |
| `_generate_diff_image()` | –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–º—ñ–Ω–µ–Ω–∏—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤ |

### 4.2 VisionContextManager

- **Trend Detection**: –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç—Ä–µ–Ω–¥—É –∑–º—ñ–Ω (increasing/decreasing/stable)
- **Active Region Tracking**: Hot zones –∑ —á–∞—Å—Ç–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏
- **Frame History**: –î–æ 10 –∫–∞–¥—Ä—ñ–≤ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
- **Step Verification**: `get_diff_summary_for_step()` –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥—ñ–π

```python
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞–º–∏
result = EnhancedVisionTools.capture_and_analyze(
    multi_monitor=True,
    generate_diff_image=True
)
context_manager.update_context(result)
```

---

## 5. –ú–µ—Ç–∞-–ø–ª–∞–Ω—ñ–Ω–≥ —Ç–∞ –ü–∞–º'—è—Ç—å (Meta-planning 2.0)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è | –û–ø–∏—Å |
| :--- | :--- | :--- |
| **Strategy** | `linear`, `rag_heavy`, `aggressive` | –¢–∏–ø –ø–æ–±—É–¥–æ–≤–∏ –ø–ª–∞–Ω—É. |
| **Active Retrieval** | `retrieval_query` | –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç, —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–∏–π Meta-Planner. |
| **Anti-patterns** | `status: failed` | –°–∏—Å—Ç–µ–º–∞ —É–Ω–∏–∫–∞—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π, —è–∫—ñ –ø—Ä–∏–∑–≤–µ–ª–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫ —É –º–∏–Ω—É–ª–æ–º—É. |
| **Confidence Score** | `0.1` ... `1.0` | –û—Ü—ñ–Ω–∫–∞ –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Å–ø–æ–≥–∞–¥—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø—Ä–∞–≤–æ–∫ —Ç–∞ –∫—Ä–æ–∫—ñ–≤. |
| **Source Tracking** | `trinity_runtime`, `user` | –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –∑–Ω–∞–Ω–Ω—è. |

---

## 6. MCP –§–æ–Ω–¥–∞—Ü—ñ—è (–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Ä–µ—î—Å—Ç—Ä `MCPToolRegistry` –Ω–∞–¥–∞—î –∞–≥–µ–Ω—Ç–∞–º –¥–æ—Å—Ç—É–ø –¥–æ:

### –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (Internal)
-   **Automation (Unified)**: Shell, AppleScript, Shortcuts, Mouse/Keyboard
-   **System Cleanup**: –û—á–∏—â–µ–Ω–Ω—è —Å–ª—ñ–¥—ñ–≤, –ª–æ–≥—ñ–≤, —Å–ø—É—Ñ—ñ–Ω–≥ (Stealth Mode)
-   **Recorder Control**: –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å–æ–º —Å–µ—Å—ñ–π
-   **Desktop/Vision**: `enhanced_vision_analysis`, `vision_analysis_with_context`, `compare_images`

### –ó–æ–≤–Ω—ñ—à–Ω—ñ MCP –°–µ—Ä–≤–µ—Ä–∏ (External)
-   **Playwright MCP**: –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (headless/headful)
-   **PyAutoGUI MCP**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –µ–º—É–ª—è—Ü—ñ—è –≤–≤–æ–¥—É
-   **Context7 MCP**: –î–æ—Å—Ç—É–ø –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫
-   **SonarQube MCP**: Quality gate —Ç–∞ –∞–Ω–∞–ª—ñ–∑ –∫–æ–¥—É

---

## 7. TUI —Ç–∞ –¢–µ–º–∏

### 7.1 –î–æ—Å—Ç—É–ø–Ω—ñ —Ç–µ–º–∏ (14 —Ç–µ–º)

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –¢–µ–º–∏ |
|:---|:---|
| **Classic** | monaco, dracula, nord, gruvbox |
| **Modern** | catppuccin, tokyo-night, one-dark, rose-pine |
| **Vibrant** | cyberpunk, aurora, midnight-blue, solarized-dark |
| **Special** | hacker-vibe (dimmed) |

### 7.2 –ù–∞–≤—ñ–≥–∞—Ü—ñ—è TUI
- **Ctrl+T**: –®–≤–∏–¥–∫–∞ –∑–º—ñ–Ω–∞ —Ç–µ–º–∏
- **Settings ‚Üí Appearance**: –í–∏–±—ñ—Ä —Ç–µ–º–∏ –∑ –ø—Ä–µ–≤ º—é
- **Custom themes**: `~/.system_cli/themes/*.json`

---

## 8. Trinity Improvements v1.0 (–ì—Ä—É–¥–µ–Ω—å 2025)

**–ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è —è–∫–æ—Å—Ç—ñ —Ç–∞ –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ:**

### 8.1 Pydantic State Validation
```python
from core.trinity_models import TrinityStateModel, MetaConfig

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
state = TrinityStateModel(
    current_agent="meta_planner",
    task_type="DEV",
    meta_config=MetaConfig(strategy="linear")
)
state.validate_state()  # ‚úÖ –í—Å–µ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ
```

### 8.2 MyPy Type Checking
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ –Ω–∞ —Ä—ñ–≤–Ω—ñ Python 3.11+
mypy core/trinity.py --config-file=setup.cfg
```

### 8.3 State Initialization Logging
- –î–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ª–æ–≥–∏ –≤—Å—ñ—Ö –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –∞–≥–µ–Ω—Ç—ñ–≤
- –¢—Ä–∞ÃÅ—Å—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π —Ç–∞ –ø–æ–º–∏–ª–æ–∫
- –ú—ñ—Å—Ü–µ: `logs/trinity_state_*.log`

### 8.4 Unit Testing
- 16 –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è Pydantic –º–æ–¥–µ–ª–µ–π
- 100% coverage –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –ó–∞–ø—É—Å–∫: `pytest tests/test_trinity_models.py -v`

---

## 9. –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# –í–∏–º–æ–≥–∏: Python 3.11 (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ) –∞–±–æ 3.12
./setup.sh                  # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
./cli.sh                    # –ó–∞–ø—É—Å–∫ TUI
/trinity <–∑–∞–≤–¥–∞–Ω–Ω—è>         # –ó–∞–ø—É—Å–∫ Trinity
/autopilot <–∑–∞–≤–¥–∞–Ω–Ω—è>       # –†–µ–∂–∏–º –ø–æ–≤–Ω–æ—ó –∞–≤—Ç–æ–Ω–æ–º—ñ—ó

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É
pytest tests/test_trinity_models.py -v
mypy core/ --config-file=setup.cfg
```

---

## 10. –ü–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

üìã **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** [`project_structure_final.txt`](../project_structure_final.txt)

–¶–µ–π —Ñ–∞–π–ª –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É Trinity —Ç–∞ –º—ñ—Å—Ç–∏—Ç—å:
- –°–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤ (163 –ø–∞–ø–∫–∏, 256 —Ñ–∞–π–ª—ñ–≤)
- –ú—ñ—Ç–∫–∏ —á–∞—Å—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–∞ –ª–æ–≥—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –ü–æ–≤–Ω–∏–π –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç–µ–π

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
cat project_structure_final.txt

# –ê–±–æ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º
cat project_structure_final.txt | grep "\.py$"
```

---

## 11. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞–º–∏ VS Code

### Windsurf, GitHub Copilot —Ç–∞ –ø–æ–¥—ñ–±–Ω—ñ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏

–¶—ñ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏ (Windsurf, GitHub Copilot, Cursor) –º–∞—é—Ç—å –≤–ª–∞—Å–Ω—ñ —Å–∏—Å—Ç–µ–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è:

**–ú—ñ—Å—Ü–µ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ–≤:**
- **Windsurf:** `~/Library/Application Support/Windsurf/logs/`
- **GitHub Copilot:** `~/.vscode/extensions/github.copilot-*/` (–≤–±—É–¥–æ–≤–∞–Ω–æ —É VS Code)
- **VS Code:** `~/Library/Application Support/Code/logs/`

**–î–µ –∑–Ω–∞–π—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
- `~/.last_response.txt` ‚Äî –û—Å—Ç–∞–Ω–Ω—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ Trinity –∞–±–æ –∞–≥–µ–Ω—Ç–∞
- `task_logs/` ‚Äî –õ–æ–≥-—Ñ–∞–π–ª–∏ —É—Å—ñ—Ö –∑–∞–≤–¥–∞–Ω—å –∑ –º—ñ—Ç–∫–∞–º–∏ —á–∞—Å—É
- `logs/trinity_state_*.log` ‚Äî –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ —Å—Ç–∞–Ω—É Trinity

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –≤—ñ–¥–ø–æ–≤—ñ–¥—å
cat .last_response.txt

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ Windsurf
tail -f ~/Library/Application\ Support/Windsurf/logs/*.log

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ Task
ls -lt task_logs/ | head -5
```

**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ Trinity:**
- Trinity –º–æ–∂–µ —á–∏—Ç–∞—Ç–∏ `.last_response.txt` –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É `task_logs/task_*.log`
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î —Å—Ç–∞–Ω –∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ `system_cli/state.py`

---

## 12. –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

### –Ø–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è `project_structure_final.txt`?

**–°–∫—Ä–∏–ø—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:**
- `regenerate_structure.sh` ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- `.git/hooks/post-commit` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ–º–º—ñ—Ç—É

**–©–æ –≤–∫–ª—é—á–∞—î—Ç—å—Å—è –≤ —Ñ–∞–π–ª (–≤–∂–µ –Ω–∞–ø–æ–≤–Ω–µ–Ω–æ):**
‚úÖ –ú–µ—Ç–∞—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ —á–∞—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
‚úÖ –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö task_logs (–¥–æ 5 —Ñ–∞–π–ª—ñ–≤ –∑ —Ä–æ–∑–º—ñ—Ä–∞–º–∏)
‚úÖ `.last_response.txt` ‚Äî –æ—Å—Ç–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞/–∞–≥–µ–Ω—Ç–∞ (—Å–∫–æ—Ä–æ—á–µ–Ω–∞ –¥–æ 500 —Å–∏–º–≤–æ–ª—ñ–≤)
‚úÖ Log locations ‚Äî —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤ Trinity, Windsurf, Copilot, VS Code
‚úÖ Project statistics ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å Python —Ñ–∞–π–ª—ñ–≤, —Ç–µ—Å—Ç—ñ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π
‚úÖ Git history ‚Äî –æ—Å—Ç–∞–Ω–Ω—ñ 10 –∫–æ–º—ñ—Ç—ñ–≤
‚úÖ Project structure ‚Äî –ø–æ–≤–Ω–µ –¥–µ—Ä–µ–≤–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π (–∑ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è–º–∏ –≤—Ä–æ–¥–µ __pycache__, .git)

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**
```bash
# –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
./regenerate_structure.sh

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–º—ñ—Å—Ç (–º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ .last_response.txt, –ª–æ–≥–∏, git info)
head -40 project_structure_final.txt

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –ª–æ–≥–∏ Trinity —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è
ls -la logs/trinity_state_*.log
```

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞–º–∏ ‚Äî `state_logger.py`

**–õ–æ–≥—É–≤–∞–Ω–Ω—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Trinity:**
```python
from core.state_logger import StateInitLogger

logger = StateInitLogger()
logger.log_initial_state("–ó–∞–≤–¥–∞–Ω–Ω—è", state_dict)
```

**–õ–æ–≥–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤:**
- `logs/trinity_state_YYYYMMDD.log` ‚Äî –û—Å—å –¥–µ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏!
- –§–æ—Ä–º–∞—Ç: `[timestamp] [logger_name] [level] [function:line] [message]`

**–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —â–æ –ª–æ–≥–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è
python3 -c "from core.state_logger import StateInitLogger; StateInitLogger().log_initial_state('Test', {})"

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
tail -f logs/trinity_state_*.log
```

---

## 13. FAQ & Advanced Capabilities

### 13.1 –†–µ–∂–∏–º –†–æ–∑—Ä–æ–±–Ω–∏–∫–∞ (Dev Mode)
Atlas –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ —Ä–æ–∑—à–∏—Ä–µ–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ:
-   **Direct Code Editing**: –ß–µ—Ä–µ–∑ `multi_replace_file_content`
-   **Shell Execution**: `git`, `npm`, `python` —Ç–∞ —ñ–Ω—à—ñ
-   **Unsafe Tools**: AppleScript, Mouse Control (–∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º)

### 13.2 Self-Healing
1.  **Detection**: Grisha –∞–Ω–∞–ª—ñ–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É
2.  **Correction**: Replanning Loop –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
3.  **Strategy Shift**: –ü–µ—Ä–µ—Ö—ñ–¥ Native ‚Üí GUI –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
4.  **Limits**: `MAX_REPLANS` –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö —Ü–∏–∫–ª—ñ–≤

### 13.3 –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
-   **User ‚Üí Agent**: –ö–æ–º–∞–Ω–¥–∏/—É—Ç–æ—á–Ω–µ–Ω–Ω—è —á–µ—Ä–µ–∑ TUI
-   **Agent ‚Üí User**: –¢–µ–≥ `[VOICE]` –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
-   **Feedback Loop**: –ü—Ä–∏–π–æ–º –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å –ø–∞—É–∑

---

*–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 20 –≥—Ä—É–¥–Ω—è 2025 —Ä. - Trinity Improvements v1.0 —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ*
